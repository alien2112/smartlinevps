APP_NAME=SmartLine
APP_ENV=local
APP_MODE=live
APP_KEY=base64:aj6UCF3URvpY7oC92LcoKuDKWJqP2u5LKgSOBTP8mFQ=
APP_DEBUG=true
APP_URL=localhost

LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=smartline_db
DB_USERNAME=dev
DB_PASSWORD=dev

BROADCAST_DRIVER=reverb
CACHE_DRIVER=file
FILESYSTEM_DRIVER=local
QUEUE_CONNECTION=sync
SESSION_DRIVER=file
SESSION_LIFETIME=120

MEMCACHED_HOST=127.0.0.1

REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

#-----------------------------------------------------------------------
# MAIL CONFIGURATION
#-----------------------------------------------------------------------
# Supported: mailgun, log, array, failover
# Use 'mailgun' for production, 'log' for development
#-----------------------------------------------------------------------
MAIL_MAILER=mailgun
MAIL_FROM_ADDRESS=noreply@smartline.com
MAIL_FROM_NAME="${APP_NAME}"
MAIL_LOG_CHANNEL=stack

# Mailgun Configuration (Free: 5,000 emails/month for 3 months)
# Sign up at: https://www.mailgun.com/
MAILGUN_DOMAIN=your-domain.mailgun.org
MAILGUN_SECRET=your-mailgun-api-key
MAILGUN_ENDPOINT=api.mailgun.net

#-----------------------------------------------------------------------
# SMS CONFIGURATION
#-----------------------------------------------------------------------
# SMS gateways are configured in the database (settings table)
# Supported: sms_smart (Beon.chat), twilio
#-----------------------------------------------------------------------

# ðŸ¥‡ SMS Smart / Beon.chat (Primary - Best for Egypt)
# Sign up at: https://beon.chat/
# âœ… Cheapest for Egypt local traffic
# âœ… Best delivery inside Egypt
BEON_API_TOKEN=your-beon-api-token

# ðŸ¥ˆ Twilio (Secondary - Testing/Global)
# Sign up at: https://www.twilio.com/
# âœ… Free trial credit (~$10)
# Configure via Admin Panel or database settings table

#-----------------------------------------------------------------------
# PUSHER / WEBSOCKETS
#-----------------------------------------------------------------------
PUSHER_APP_ID=smartline
PUSHER_APP_KEY=smartline
PUSHER_APP_SECRET=smartline
PUSHER_APP_CLUSTER=mt1
PUSHER_HOST="${APP_URL}"
PUSHER_PORT=6015
PUSHER_SCHEME="http"

MIX_APP_NAME="${APP_NAME}"
MIX_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
MIX_PUSHER_HOST="${PUSHER_HOST}"
MIX_PUSHER_PORT="${PUSHER_PORT}"
MIX_PUSHER_SCHEME="${PUSHER_SCHEME}"
MIX_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"
LARAVEL_WEBSOCKETS_SSL_LOCAL_CERT=""
LARAVEL_WEBSOCKETS_SSL_LOCAL_PK=""
SOFTWARE_ID=MTAwMDAwMDA=

#-----------------------------------------------------------------------
# REVERB (WEBSOCKETS)
#-----------------------------------------------------------------------
REVERB_APP_ID=smartline
REVERB_APP_KEY=smartline
REVERB_APP_SECRET=smartline
REVERB_HOST="${APP_URL}"
REVERB_PORT=6015
REVERB_SCHEME="http"
REVERB_SSL_CERT_PATH=""
REVERB_SSL_KEY_PATH=""

MIX_REVERB_APP_KEY="${REVERB_APP_KEY}"
MIX_REVERB_HOST="${REVERB_HOST}"
MIX_REVERB_PORT="${REVERB_PORT}"
MIX_REVERB_SCHEME="${REVERB_SCHEME}"

#-----------------------------------------------------------------------
# IMAGE UPLOAD CONFIGURATION
#-----------------------------------------------------------------------
# Maximum file size for image uploads (in KB)
# 500 = 500KB (recommended for mobile apps)
# 1024 = 1MB, 2048 = 2MB
#-----------------------------------------------------------------------
IMAGE_MAX_SIZE=500
PROFILE_IMAGE_MAX_SIZE=500
IDENTITY_IMAGE_MAX_SIZE=500
BANNER_IMAGE_MAX_SIZE=500
VEHICLE_DOC_MAX_SIZE=500
ICON_IMAGE_MAX_SIZE=500

#-----------------------------------------------------------------------
# LOCATION TRACKING CONFIGURATION
#-----------------------------------------------------------------------
# Driver location update rate and sanity checks
# See config/tracking.php for full documentation
#-----------------------------------------------------------------------

# Redis key for location configuration
LOCATION_CONFIG_KEY=location:update:config:v1

# How often apps check for config updates (seconds)
LOCATION_CONFIG_REFRESH=300

# Active preset: normal, high_traffic, emergency, performance
LOCATION_ACTIVE_PRESET=normal

# Sanity check thresholds
TRACKING_MAX_SPEED=200
TRACKING_MAX_SPEED_MS=55.5
TRACKING_MAX_JUMP=1000
TRACKING_MAX_JUMP_TIME=15
TRACKING_MAX_IDLE=10
TRACKING_MAX_FUTURE_OFFSET=60

# Legacy trigger thresholds
TRACKING_MIN_DISTANCE=50
TRACKING_MIN_TIME=15

# Route storage
TRACKING_STORE_ROUTE=true
TRACKING_ROUTE_RETENTION=90
TRACKING_STORE_EVENTS_ONLY=false

# Notification settings
TRACKING_NOTIFY_INTERVAL=10
TRACKING_USE_WEBSOCKET=true
TRACKING_USE_PUSH=false

# Anomaly handling
TRACKING_MAX_ANOMALIES=5
TRACKING_REJECT_ANOMALIES=false
TRACKING_NOTIFY_ADMIN_ANOMALY=false

# Distance calculation method: haversine or vincenty
TRACKING_DISTANCE_METHOD=haversine

#-----------------------------------------------------------------------
# DRIVER MATCHING CONFIGURATION
#-----------------------------------------------------------------------
# Controls how rides are dispatched to nearby drivers
# See config/rate_limits.php for full documentation
#-----------------------------------------------------------------------

# Search radius for finding nearby drivers (kilometers)
DRIVER_SEARCH_RADIUS_KM=10

# Maximum number of drivers to notify for a single ride
MAX_DRIVERS_TO_NOTIFY=10

# Timeout for driver to accept ride (seconds)
DRIVER_MATCH_TIMEOUT_SECONDS=120

# Minimum driver rating required
MIN_DRIVER_RATING=3.5

# Maximum distance jump for suspicious activity (km)
MAX_DISTANCE_JUMP_KM=5.0

# How long a driver can be idle before considered offline (minutes)
DRIVER_IDLE_TIMEOUT_MINUTES=30

# Search radius expansion multiplier (after initial timeout)
SEARCH_RADIUS_EXPANSION=1.5

# Maximum expanded search radius (km)
MAX_DRIVER_SEARCH_RADIUS_KM=25

#-----------------------------------------------------------------------
# RIDE CONFIGURATION
#-----------------------------------------------------------------------
# General ride settings
#-----------------------------------------------------------------------

# Grace period for free cancellation (minutes)
FREE_CANCELLATION_MINUTES=5

# Maximum ride request validity (minutes)
RIDE_REQUEST_VALIDITY_MINUTES=10

# Driver arrival timeout (minutes)
DRIVER_ARRIVAL_TIMEOUT_MINUTES=15

# Maximum waiting time for customer (minutes)
MAX_CUSTOMER_WAIT_MINUTES=5

#-----------------------------------------------------------------------
# API RATE LIMITING CONFIGURATION
#-----------------------------------------------------------------------
# Configurable rate limits per endpoint type
# All values are: max requests / decay window (seconds)
#-----------------------------------------------------------------------

# Trip actions rate limits
RATE_LIMIT_TRIP_ACCEPT_MAX=10
RATE_LIMIT_TRIP_ACCEPT_DECAY=60
RATE_LIMIT_TRIP_CANCEL_MAX=5
RATE_LIMIT_TRIP_CANCEL_DECAY=60

# Location update rate limit
RATE_LIMIT_LOCATION_UPDATE_MAX=100
RATE_LIMIT_LOCATION_UPDATE_DECAY=60

# Driver search rate limit
RATE_LIMIT_DRIVER_SEARCH_MAX=30
RATE_LIMIT_DRIVER_SEARCH_DECAY=60

# General API rate limit
RATE_LIMIT_GENERAL_MAX=60
RATE_LIMIT_GENERAL_DECAY=60

# Authentication rate limit (anti-brute-force)
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_AUTH_DECAY=60

# SMS/OTP rate limit (per 5 minutes)
RATE_LIMIT_SMS_MAX=3
RATE_LIMIT_SMS_DECAY=300
